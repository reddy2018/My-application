node
{
   stage('SCM Checkout')
	{
		git 'https://github.com/reddy2018/mvn_SHtechnology.git'
	}
	stage('Compile-Package'){
		// Get maven home path
      		def mvnHome =  tool name: 'maven 3.5.4', type: 'maven'   
     		sh "${mvnHome}/bin/mvn package"
	}
	stage('Deploye to tomcat')
	{
		sshagent(['tomcat-dev']) 
		{
			sh 'scp -o StrictHostKeyChecking=no target/*.war ec2-user@172.31.95.192:/opt/tomcat/apache-tomcat-9.0.10/webapps/'
      		}
	}

   stage('Email Notification')
   {
   	mail bcc: '', body: '''Hi Welcome to jenkins email alerts
      	Thanks
      	Hari''', cc: '', from: '', replyTo: '', subject: 'Jenkins Job', to: 'parandhamareddy026@gmail.com'
   }
   stage('Slack Notification')
   {
   	slackSend baseUrl: 'https://hooks.slack.com/services/',
	channel: '#jenkins-pipeline-demo',
	color: 'good', 
  	message: 'Welcome to Jenkins, Slack!', 
       	teamDomain: 'javahomecloud',
       	tokenCredentialId: 'slack-demo'
   }

}
